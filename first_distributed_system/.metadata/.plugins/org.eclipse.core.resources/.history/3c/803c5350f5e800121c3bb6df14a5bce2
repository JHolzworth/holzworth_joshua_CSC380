package Controller;

import java.io.IOException;
import java.io.InputStream;
import java.io.OutputStream;
import java.io.PrintWriter;
import java.net.Socket;
import java.util.Scanner;

public class ClientProcessor implements Runnable{

	MathLogic logic;
	Socket clientSocket;
	public ClientProcessor(MathLogic _logic, Socket _clientSocket){
		logic = _logic;
		clientSocket = _clietnSocket;
	}
	
	public void run() {
		InputStream clientInput;
		try {
			clientInput = clientSocket.getInputStream();
		
		Scanner inputReader = new Scanner(clientInput);
		
		String userRequestedMethod = inputReader.next();
		int firstInt = inputReader.nextInt();
		int secondInt = inputReader.nextInt();
		
		int value = userRequestedMethod.equalsIgnoreCase("add")?logic.add(firstInt, secondInt):logic.subtract(firstInt, secondInt);
		
		OutputStream clientOutput = clientSocket.getOutputStream();
		PrintWriter clientWriter = new PrintWriter(clientOutput);
		clientWriter.write("Value " +value);
		clientWriter.flush();
		clientWriter.close();
		} catch (IOException e) {
			// TODO Auto-generated catch block
			e.printStackTrace();
		}
	}

}
